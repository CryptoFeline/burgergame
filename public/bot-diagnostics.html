<!DOCTYPE html>
<html>
<head>
    <title>Bot Status Checker</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .button { background: #0088cc; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ü§ñ Telegram Bot Diagnostics</h1>
    
    <h2>Test Functions:</h2>
    <button class="button" onclick="testFunction()">Test Bot Function</button>
    <button class="button" onclick="checkWebhook()">Check Webhook Status</button>
    <button class="button" onclick="setupWebhook()">Setup Webhook</button>
    <button class="button" onclick="testBotAPI()">Test Bot API</button>
    
    <div id="result"></div>
    
    <script>
        async function testFunction() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '‚è≥ Testing bot function...';
            
            try {
                const response = await fetch('/.netlify/functions/telegram-bot', {
                    method: 'GET'
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    resultDiv.innerHTML = '<p class="success">‚úÖ Bot function is working!</p><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                } else {
                    resultDiv.innerHTML = '<p class="error">‚ùå Function error: ' + data.error + '</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<p class="error">‚ùå Network error: ' + error.message + '</p>';
            }
        }
        
        async function checkWebhook() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '‚è≥ Checking webhook status...';
            
            try {
                // This would need to be implemented in the bot function
                resultDiv.innerHTML = '<p class="info">üìù Webhook check would need bot API access. Use Telegram\'s @BotFather to check webhook status with /getWebhookInfo</p>';
            } catch (error) {
                resultDiv.innerHTML = '<p class="error">‚ùå Error: ' + error.message + '</p>';
            }
        }
        
        async function setupWebhook() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '‚è≥ Setting up webhook...';
            
            try {
                const response = await fetch('/.netlify/functions/telegram-bot', {
                    method: 'GET'
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    resultDiv.innerHTML = '<p class="success">‚úÖ Webhook setup completed!</p><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                } else {
                    resultDiv.innerHTML = '<p class="error">‚ùå Webhook setup failed: ' + data.error + '</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<p class="error">‚ùå Error: ' + error.message + '</p>';
            }
        }
        
        async function testBotAPI() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p class="info">üìã Manual Bot API Tests:</p>';
            resultDiv.innerHTML += '<p>1. Go to: <code>https://api.telegram.org/bot&lt;YOUR_BOT_TOKEN&gt;/getMe</code></p>';
            resultDiv.innerHTML += '<p>2. Go to: <code>https://api.telegram.org/bot&lt;YOUR_BOT_TOKEN&gt;/getWebhookInfo</code></p>';
            resultDiv.innerHTML += '<p>3. Replace &lt;YOUR_BOT_TOKEN&gt; with your actual bot token</p>';
            resultDiv.innerHTML += '<p class="error">‚ö†Ô∏è Don\'t share your bot token publicly!</p>';
        }
    </script>
</body>
</html>
